<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of MAIN_Lagrangian</title>
  <meta name="keywords" content="MAIN_Lagrangian">
  <meta name="description" content="==============================================================================">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../../index.html">Home</a> &gt;  <a href="../index.html">Mfiles</a> &gt; <a href="index.html">Lagrangian_package</a> &gt; MAIN_Lagrangian.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../../index.html"><img alt="<" border="0" src="../../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for Mfiles/Lagrangian_package&nbsp;<img alt=">" border="0" src="../../right.png"></a></td></tr></table>-->

<h1>MAIN_Lagrangian
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>==============================================================================</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="box"><strong>This is a script file. </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre class="comment">==============================================================================
 Modified version of:
 /mnt/netapp-nencioli/DATA/KEOPS2/octave/keops/analysis/realtime_cron/an01_kerguelen_products.m

 With respect to KEOPS this file is directly called from bash as opposed to
 keops_realtime_cron.bsh;
 So I added the arguments below to replace:
 - cd to lagrangian mfile directory
 - call to init.m that: - added a bunch of directories to the path
                        - called loclavars which
                          defined lvars.datadir and lvars.lamtadir
                          (lvars.lamtadir is never used afterwrds)

 DATADIR and LAMTADIR are declared global because they are afterwards used
 inside localvars.m calle by multiple scripts;
==============================================================================</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../../matlabicon.gif)">
<li><a href="all_lagrangian_diags.html" class="code" title="function fname=all_lagrangian_diags(day0,product,out_path,ctday)">all_lagrangian_diags</a>	Modified from:</li><li><a href="all_lagrangian_figs.html" class="code" title="">all_lagrangian_figs</a>	function all_lagrangian_figs(fname,product,out_path,ctday)</li><li><a href="aviso_load.html" class="code" title="function err=aviso_load(day0,dayf,product)">aviso_load</a>	The function choses different functions to read AVISO velocity fields</li><li><a href="localvars.html" class="code" title="function lvars=localvars">localvars</a>	Previously defined in MAIN_Lagrangian.m</li></ul>
This function is called by:
<ul style="list-style-image:url(../../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">%==============================================================================</span>
0002 <span class="comment">% Modified version of:</span>
0003 <span class="comment">% /mnt/netapp-nencioli/DATA/KEOPS2/octave/keops/analysis/realtime_cron/an01_kerguelen_products.m</span>
0004 <span class="comment">%</span>
0005 <span class="comment">% With respect to KEOPS this file is directly called from bash as opposed to</span>
0006 <span class="comment">% keops_realtime_cron.bsh;</span>
0007 <span class="comment">% So I added the arguments below to replace:</span>
0008 <span class="comment">% - cd to lagrangian mfile directory</span>
0009 <span class="comment">% - call to init.m that: - added a bunch of directories to the path</span>
0010 <span class="comment">%                        - called loclavars which</span>
0011 <span class="comment">%                          defined lvars.datadir and lvars.lamtadir</span>
0012 <span class="comment">%                          (lvars.lamtadir is never used afterwrds)</span>
0013 <span class="comment">%</span>
0014 <span class="comment">% DATADIR and LAMTADIR are declared global because they are afterwards used</span>
0015 <span class="comment">% inside localvars.m calle by multiple scripts;</span>
0016 <span class="comment">%==============================================================================</span>
0017 
0018 disp(<span class="string">'%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%'</span>)
0019 disp(<span class="string">' BEGIN OF ALL LAGRANGIAN DIAG'</span>)
0020 disp(<span class="string">' '</span>)
0021 
0022 <span class="comment">%-----------------------------------------------------------</span>
0023 <span class="comment">% Cell array with arguments passed from bash script</span>
0024  args=argv;
0025  
0026  lagrang_path=[args{1},<span class="string">'/'</span>];
0027  <span class="keyword">global</span> DATADIR=[args{2},<span class="string">'/'</span>];
0028  <span class="keyword">global</span> LAMTADIR=[args{3},<span class="string">'/'</span>];
0029  out_path=[args{4},<span class="string">'/'</span>];
0030 <span class="comment">%-----------------------------------------------------------</span>
0031 
0032 <span class="comment">% %-----------------------------------------------------------</span>
0033 <span class="comment">% % Uncomment this and comment above to test without need of bash script</span>
0034 <span class="comment">% main_path='/home/ENS/apogee/r1003867/Stage_OUTPACE/OUTPACE/';</span>
0035 <span class="comment">% %main_path='/media/DATA/STRASSE/';</span>
0036 <span class="comment">% lagrang_path=[main_path,'Mfiles/Lagrangian_package/'];</span>
0037 <span class="comment">% global DATADIR=[main_path,'Data/'];</span>
0038 <span class="comment">% global LAMTADIR=[lagrang_path,'lamta.dev/'];</span>
0039 <span class="comment">% out_path=[main_path,'Wrk'];</span>
0040 <span class="comment">% %-----------------------------------------------------------</span>
0041 
0042 <span class="comment">% To replace init.m</span>
0043 cd(lagrang_path)
0044 lvars=<a href="localvars.html" class="code" title="function lvars=localvars">localvars</a>;
0045 addpath(lvars.lamtadir)
0046 
0047 products={<span class="string">'nrt_global_2014'</span>}; <span class="comment">% Only global products for OUTPACE</span>
0048 <span class="comment">% products={'nrt_global_2010'}; % Only global products for OUTPACE</span>
0049 
0050 <span class="comment">%days=[1 7]; % To process d0 and d6 data</span>
0051 days=[7]; <span class="comment">% To process d0 and d6 data</span>
0052 <span class="comment">% (add 4 to the array to process also d3)</span>
0053 dayprod=now;
0054 <span class="comment">% dayprod=datenum(2014,6,27);</span>
0055 <span class="comment">% dayprod=datenum(2013,2,20);</span>
0056 
0057 <span class="keyword">for</span> ctproduct=1:length(products)
0058 
0059     product=products{ctproduct};
0060     <span class="comment">%err=aviso_load(datevec(dayprod-135),datevec(floor(dayprod-1)),product);</span>
0061     err=<a href="aviso_load.html" class="code" title="function err=aviso_load(day0,dayf,product)">aviso_load</a>(datevec(dayprod-10),datevec(floor(dayprod)),product);
0062 
0063     <span class="keyword">if</span>(~err)
0064         <span class="keyword">for</span> ctday=days
0065             <span class="comment">%day0=datevec(dayprod-ctday);</span>
0066             day0=datevec(dayprod);
0067             disp(<span class="string">'#==============================================='</span>)
0068             disp([<span class="string">'# Processing '</span>,product,<span class="string">' for d'</span>,num2str(ctday-1)])
0069             <span class="comment">% Changed from all_lagrangiandiags_keops2</span>
0070             fname=<a href="all_lagrangian_diags.html" class="code" title="function fname=all_lagrangian_diags(day0,product,out_path,ctday)">all_lagrangian_diags</a>(day0,product,out_path,ctday)
0071             disp(<span class="string">'%-----------------------------------------------'</span>)
0072 
0073              disp([<span class="string">'# Figures for product '</span>,product,<span class="string">' for d'</span>,num2str(ctday-1)])
0074              <a href="all_lagrangian_figs.html" class="code" title="">all_lagrangian_figs</a>(fname,product,out_path,ctday);
0075              disp(<span class="string">'#==============================================='</span>)
0076              disp(<span class="string">' '</span>)
0077         <span class="keyword">end</span>
0078     <span class="keyword">end</span>
0079 
0080 <span class="keyword">end</span></pre></div>
<hr><address>Generated on Mon 07-Jul-2014 17:12:06 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>